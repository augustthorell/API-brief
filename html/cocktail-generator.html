<!DOCTYPE html>
<html lang="en">

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cocktail Generator</title>

<link rel="Stylesheet" type="text/css" href="../css/style.css" />
<!--Font Library-->
<link rel="stylesheet" href="https://use.typekit.net/hib8wjs.css">

<script defer src="../js/script.js"></script>

</head>

<body>
    <header>

        <div class="hamburger-menu" id="js-navbar-toggle">
            <img src="../img/menu-2.svg" alt="Hamburger menu">
        </div>

        <div class="menu" id="js-menu">
            <ul class="menu-list">
                <li><a href="../index.html">Home</a></li>
                <li><a href="cocktail-generator.html">Cocktail generator</a></li>
                <li><a href="cocktail-library.html">Cocktail library</a></li>
                <li><a href="game.html">Start game</a></li>
            </ul>
        </div>
    </header>

    <main>
        <h1 class="title">Cocktail Generator</h1>

        <div class="intro">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>

        <!-- <button class="button" id="generator" onclick="getRandomeCocktail();">Generate cocktail</button> -->
        <button class="button" id="generator" onClick="window.location.reload()">Generate cocktail</button>

        <div class="drink-information" id="drink-info">
            <script>
                function getRandomeCocktail() {
                    fetch('https://www.thecocktaildb.com/api/json/v1/1/random.php')
                        .then(
                            function(response) {
                                if (response.status !== 200) {
                                    console.log('Looks like there was a problem. Status Code: ' +
                                        response.status);
                                    return;
                                }

                                // Examine the text in the response
                                response.json().then(function(data) {
                                    console.log(data);
                                    displayRandomCocktail(data);
                                });
                            }
                        )
                        .catch(function(err) {
                            console.log('Fetch Error :-S', err);
                        });
                }
                getRandomeCocktail();

                function displayRandomCocktail(cocktail) {
                    console.log(cocktail.drinks[0].strDrink);

                    let drinkInfo = document.querySelector('#drink-info');

                    let drinkName = document.createElement('h2');
                    drinkName.innerHTML = cocktail.drinks[0].strDrink;
                    drinkInfo.appendChild(drinkName);


                    let img = document.createElement('img');
                    img.src = cocktail.drinks[0].strDrinkThumb;
                    drinkInfo.appendChild(img);


                    for (let i = 1; i < 16; i++) {
                        // console.log(cocktail.drinks[i][`strIngredient${i}`]);

                        if (cocktail.drinks[0][`strIngredient${i}`] == null) {
                            break;
                        }

                        let ingredient = document.createElement('list-item');
                        ingredient.innerHTML = "-- " + cocktail.drinks[0][`strIngredient${i}`] + ': ' + cocktail.drinks[0][`strMeasure${i}`] + '<br>';

                        drinkInfo.appendChild(ingredient);
                    }
                    let recipe = document.createElement('recipe');
                    recipe.innerHTML = "How to make it<br>" + "-- " + cocktail.drinks[0].strInstructions;

                    drinkInfo.appendChild(recipe);
                }
            </script>
        </div>
        <button class="button" id="library"><a href="cocktail-library.html">View cocktail library</a></button>
    </main>
</body>

</html>